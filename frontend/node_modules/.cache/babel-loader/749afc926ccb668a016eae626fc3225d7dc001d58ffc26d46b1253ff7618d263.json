{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useContext,useEffect,useState}from\"react\";import{AuthContext}from\"../context/AuthContext\";import{Container,Row,Col}from'reactstrap';import{useNavigate}from\"react-router-dom\";import'./../styles/admin-dashboard.css';import Subtitle from'../shared/Subtitle';import{BASE_URL}from'./../utils/config';import UploadTable from\"../Form/UploadTable\";import Table from\"../Form/Table\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminDashboard=function AdminDashboard(){var _useContext=useContext(AuthContext),user=_useContext.user;var navigate=useNavigate();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),userCount=_useState2[0],setUserCount=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),tourCount=_useState4[0],setTourCount=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),bookingCount=_useState6[0],setBookingCount=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),reviewCount=_useState8[0],setReviewCount=_useState8[1];useEffect(function(){// console.log(\"user\",user)\nmove();fetchCounts();});var move=function move(){if(user===null||user===undefined||!user){navigate(\"/\");}if(user&&user.role===\"user\"){navigate(\"/\");}};var fetchCounts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,result,toursResponse,toursData,bookResponse,bookData,reviewResponse,reviewData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(BASE_URL,\"/users\"));case 3:res=_context.sent;_context.next=6;return res.json();case 6:result=_context.sent;setUserCount(result.count);//Fetch tour count\n_context.next=10;return fetch(\"\".concat(BASE_URL,\"/tours/search/getTourCount\"));case 10:toursResponse=_context.sent;_context.next=13;return toursResponse.json();case 13:toursData=_context.sent;setTourCount(toursData.data);//Fetch bookings count //Fetch tour count\n_context.next=17;return fetch(\"\".concat(BASE_URL,\"/booking\"));case 17:bookResponse=_context.sent;_context.next=20;return bookResponse.json();case 20:bookData=_context.sent;setBookingCount(bookData.count);//Fetch review count //Fetch tour count\n_context.next=24;return fetch(\"\".concat(BASE_URL,\"/review\"));case 24:reviewResponse=_context.sent;_context.next=27;return reviewResponse.json();case 27:reviewData=_context.sent;setReviewCount(reviewData.count);_context.next=34;break;case 31:_context.prev=31;_context.t0=_context[\"catch\"](0);console.error('Error fetching counts:',_context.t0);case 34:case\"end\":return _context.stop();}},_callee,null,[[0,31]]);}));return function fetchCounts(){return _ref.apply(this,arguments);};}();var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showTable=_useState10[0],setShowTable=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showUploadForm=_useState12[0],setShowUploadForm=_useState12[1];var handleShowClick=function handleShowClick(){setShowTable(!showTable);setShowUploadForm(false);};var handleUploadClick=function handleUploadClick(){setShowUploadForm(!showUploadForm);setShowTable(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{lg:\"12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"experience__content\",children:/*#__PURE__*/_jsx(Subtitle,{subtitle:'User and Tour Data'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"counter__wrapper d-flex align-items-center gap-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"counter__box\",children:[/*#__PURE__*/_jsx(\"span\",{children:userCount}),/*#__PURE__*/_jsx(\"h6\",{children:\"Total number Of Users\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"counter__box\",children:[/*#__PURE__*/_jsx(\"span\",{children:tourCount}),/*#__PURE__*/_jsx(\"h6\",{children:\"Total number of Tours\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"counter__box\",children:[/*#__PURE__*/_jsx(\"span\",{children:bookingCount}),/*#__PURE__*/_jsx(\"h6\",{children:\"Total number of Bookings\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"counter__box\",children:[/*#__PURE__*/_jsx(\"span\",{children:reviewCount}),/*#__PURE__*/_jsx(\"h6\",{children:\"Total number of Reviews\"})]})]})]})})}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleShowClick,children:\"Show All Tours\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUploadClick,children:\"Show Gallery Image\"})]})})})})}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[showTable&&/*#__PURE__*/_jsx(Table,{}),showUploadForm&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setShowUploadForm(false);},className:\"close\",children:/*#__PURE__*/_jsx(\"i\",{className:\"ri-close-circle-fill\",style:{fontSize:'2.3rem'}})}),/*#__PURE__*/_jsx(UploadTable,{})]})]})})})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","Container","Row","Col","useNavigate","Subtitle","BASE_URL","UploadTable","Table","AdminDashboard","user","navigate","userCount","setUserCount","tourCount","setTourCount","bookingCount","setBookingCount","reviewCount","setReviewCount","move","fetchCounts","undefined","role","fetch","res","json","result","count","toursResponse","toursData","data","bookResponse","bookData","reviewResponse","reviewData","console","error","showTable","setShowTable","showUploadForm","setShowUploadForm","handleShowClick","handleUploadClick","fontSize"],"sources":["C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/src/pages/AdminDashboard.jsx"],"sourcesContent":["import { React ,useContext, useEffect,useState }from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { Container, Row, Col } from 'reactstrap';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport './../styles/admin-dashboard.css'\r\nimport Subtitle from '../shared/Subtitle';\r\nimport { BASE_URL } from './../utils/config';\r\nimport UploadTable from \"../Form/UploadTable\";\r\nimport Table from \"../Form/Table\";\r\n\r\n\r\n\r\nconst AdminDashboard = () => {\r\nconst {user} = useContext(AuthContext)\r\nconst navigate=useNavigate();\r\n\r\n  const [userCount, setUserCount] = useState(0);\r\n  const [tourCount, setTourCount] = useState(0);\r\n  const [bookingCount, setBookingCount] = useState(0);\r\n  const [reviewCount, setReviewCount] = useState(0);\r\n\r\nuseEffect(() => {\r\n    // console.log(\"user\",user)\r\n\r\n    move();\r\n    fetchCounts();\r\n});\r\n\r\nconst move = () => {\r\n    if(user===null || user===undefined || !user){\r\n        navigate(\"/\");\r\n    }\r\n    if (user && user.role === \"user\" ) {\r\n        navigate(\"/\");\r\n    }    \r\n}\r\n\r\nconst fetchCounts = async () => {\r\n    try {\r\n      //Fetch user count\r\n      const res = await fetch(`${BASE_URL}/users`)\r\n      const result = await res.json()\r\n      setUserCount(result.count);    \r\n\r\n      //Fetch tour count\r\n      const toursResponse = await fetch(`${BASE_URL}/tours/search/getTourCount`);\r\n      const toursData = await toursResponse.json();\r\n      setTourCount(toursData.data);\r\n\r\n      //Fetch bookings count //Fetch tour count\r\n      const bookResponse = await fetch(`${BASE_URL}/booking`);\r\n      const bookData = await bookResponse.json();\r\n      setBookingCount(bookData.count);\r\n\r\n      //Fetch review count //Fetch tour count\r\n      const reviewResponse = await fetch(`${BASE_URL}/review`);\r\n      const reviewData = await reviewResponse.json();\r\n      setReviewCount(reviewData.count);\r\n\r\n\r\n      \r\n    } catch (error) {\r\n      console.error('Error fetching counts:', error);\r\n    }\r\n  };\r\n\r\n  const [showTable, setShowTable] = useState(false);\r\n  const [showUploadForm, setShowUploadForm] = useState(false);\r\n\r\n \r\n\r\n  const handleShowClick = () => {\r\n    setShowTable(!showTable);\r\n    setShowUploadForm(false);\r\n  };\r\n\r\n  \r\n\r\n\r\n\r\n\r\n  const handleUploadClick = () => {\r\n    setShowUploadForm(!showUploadForm);\r\n    setShowTable(false);\r\n  };\r\n\r\n\r\n\r\n    return <>\r\n\r\n\r\n<Container>\r\n                <Row>\r\n                    <Col lg='12'>\r\n                        <div className=\"experience__content\">\r\n                            <Subtitle subtitle={'User and Tour Data'}/>\r\n                            \r\n                        </div>\r\n\r\n                        <div className=\"counter__wrapper d-flex align-items-center gap-5\">\r\n                            <div className=\"counter__box\">\r\n                                <span>\r\n                                    {userCount}\r\n                                </span>\r\n                                <h6>Total number Of Users</h6>\r\n                            </div>\r\n\r\n                            <div className=\"counter__box\">\r\n                                <span>\r\n                                    {tourCount}\r\n                                </span>\r\n                                <h6>Total number of Tours</h6>\r\n                            </div>\r\n                            <div className=\"counter__box\">\r\n                                <span>\r\n                                    {bookingCount}\r\n                                </span>\r\n                                <h6>Total number of Bookings</h6>\r\n                            </div>\r\n                            <div className=\"counter__box\">\r\n                                <span>\r\n                                    {reviewCount}\r\n                                </span>\r\n                                <h6>Total number of Reviews</h6>\r\n                            </div>\r\n                        </div>\r\n                    </Col>                   \r\n                </Row>\r\n            </Container>\r\n\r\n\r\n            <section>\r\n                <Container>\r\n                    <Row>\r\n                        <Col>\r\n                            <div className=\"buttons\">\r\n                                <button onClick={handleShowClick}>Show All Tours</button>\r\n                                <button onClick={handleUploadClick}>Show Gallery Image</button>\r\n                            </div>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </section>\r\n\r\n                <Container>\r\n                    <Row>\r\n                        <Col>\r\n                            {showTable && <Table />}\r\n\r\n                            {showUploadForm && (\r\n                                <div>\r\n                                <button onClick={() => setShowUploadForm(false)} className='close'><i className=\"ri-close-circle-fill\" style={{ fontSize: '2.3rem' }}></i></button>\r\n                                <UploadTable/>\r\n                                </div>\r\n                            )}\r\n\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n               \r\n    \r\n    </>\r\n}\r\n\r\nexport default AdminDashboard;"],"mappings":"oeAAA,OAASA,KAAK,CAAEC,UAAU,CAAEC,SAAS,CAACC,QAAQ,KAAO,OAAO,CAC5D,OAASC,WAAW,KAAQ,wBAAwB,CACpD,OAASC,SAAS,CAAEC,GAAG,CAAEC,GAAG,KAAQ,YAAY,CAChD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,iCAAiC,CACxC,MAAOC,SAAQ,KAAM,oBAAoB,CACzC,OAASC,QAAQ,KAAQ,mBAAmB,CAC5C,MAAOC,YAAW,KAAM,qBAAqB,CAC7C,MAAOC,MAAK,KAAM,eAAe,CAAC,6IAIlC,GAAMC,eAAc,CAAG,QAAjBA,eAAc,EAAS,CAC7B,gBAAeZ,UAAU,CAACG,WAAW,CAAC,CAA/BU,IAAI,aAAJA,IAAI,CACX,GAAMC,SAAQ,CAACP,WAAW,EAAE,CAE1B,cAAkCL,QAAQ,CAAC,CAAC,CAAC,wCAAtCa,SAAS,eAAEC,YAAY,eAC9B,eAAkCd,QAAQ,CAAC,CAAC,CAAC,yCAAtCe,SAAS,eAAEC,YAAY,eAC9B,eAAwChB,QAAQ,CAAC,CAAC,CAAC,yCAA5CiB,YAAY,eAAEC,eAAe,eACpC,eAAsClB,QAAQ,CAAC,CAAC,CAAC,yCAA1CmB,WAAW,eAAEC,cAAc,eAEpCrB,SAAS,CAAC,UAAM,CACZ;AAEAsB,IAAI,EAAE,CACNC,WAAW,EAAE,CACjB,CAAC,CAAC,CAEF,GAAMD,KAAI,CAAG,QAAPA,KAAI,EAAS,CACf,GAAGV,IAAI,GAAG,IAAI,EAAIA,IAAI,GAAGY,SAAS,EAAI,CAACZ,IAAI,CAAC,CACxCC,QAAQ,CAAC,GAAG,CAAC,CACjB,CACA,GAAID,IAAI,EAAIA,IAAI,CAACa,IAAI,GAAK,MAAM,CAAG,CAC/BZ,QAAQ,CAAC,GAAG,CAAC,CACjB,CACJ,CAAC,CAED,GAAMU,YAAW,4FAAG,iQAGIG,MAAK,WAAIlB,QAAQ,WAAS,QAAtCmB,GAAG,qCACYA,IAAG,CAACC,IAAI,EAAE,QAAzBC,MAAM,eACZd,YAAY,CAACc,MAAM,CAACC,KAAK,CAAC,CAE1B;AAAA,uBAC4BJ,MAAK,WAAIlB,QAAQ,+BAA6B,SAApEuB,aAAa,sCACKA,cAAa,CAACH,IAAI,EAAE,SAAtCI,SAAS,eACff,YAAY,CAACe,SAAS,CAACC,IAAI,CAAC,CAE5B;AAAA,uBAC2BP,MAAK,WAAIlB,QAAQ,aAAW,SAAjD0B,YAAY,sCACKA,aAAY,CAACN,IAAI,EAAE,SAApCO,QAAQ,eACdhB,eAAe,CAACgB,QAAQ,CAACL,KAAK,CAAC,CAE/B;AAAA,uBAC6BJ,MAAK,WAAIlB,QAAQ,YAAU,SAAlD4B,cAAc,sCACKA,eAAc,CAACR,IAAI,EAAE,SAAxCS,UAAU,eAChBhB,cAAc,CAACgB,UAAU,CAACP,KAAK,CAAC,CAAC,iFAKjCQ,OAAO,CAACC,KAAK,CAAC,wBAAwB,aAAQ,CAAC,oEAElD,kBA3BGhB,YAAW,0CA2Bd,CAED,eAAkCtB,QAAQ,CAAC,KAAK,CAAC,0CAA1CuC,SAAS,gBAAEC,YAAY,gBAC9B,gBAA4CxC,QAAQ,CAAC,KAAK,CAAC,2CAApDyC,cAAc,gBAAEC,iBAAiB,gBAIxC,GAAMC,gBAAe,CAAG,QAAlBA,gBAAe,EAAS,CAC5BH,YAAY,CAAC,CAACD,SAAS,CAAC,CACxBG,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAC,CAOD,GAAME,kBAAiB,CAAG,QAApBA,kBAAiB,EAAS,CAC9BF,iBAAiB,CAAC,CAACD,cAAc,CAAC,CAClCD,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAIC,mBAAO,wCAGX,KAAC,SAAS,wBACM,KAAC,GAAG,wBACA,MAAC,GAAG,EAAC,EAAE,CAAC,IAAI,wBACR,YAAK,SAAS,CAAC,qBAAqB,uBAChC,KAAC,QAAQ,EAAC,QAAQ,CAAE,oBAAqB,EAAE,EAEzC,cAEN,aAAK,SAAS,CAAC,kDAAkD,wBAC7D,aAAK,SAAS,CAAC,cAAc,wBACzB,sBACK3B,SAAS,EACP,cACP,oBAAI,uBAAqB,EAAK,GAC5B,cAEN,aAAK,SAAS,CAAC,cAAc,wBACzB,sBACKE,SAAS,EACP,cACP,oBAAI,uBAAqB,EAAK,GAC5B,cACN,aAAK,SAAS,CAAC,cAAc,wBACzB,sBACKE,YAAY,EACV,cACP,oBAAI,0BAAwB,EAAK,GAC/B,cACN,aAAK,SAAS,CAAC,cAAc,wBACzB,sBACKE,WAAW,EACT,cACP,oBAAI,yBAAuB,EAAK,GAC9B,GACJ,GACJ,EACJ,EACE,cAGZ,sCACI,KAAC,SAAS,wBACN,KAAC,GAAG,wBACA,KAAC,GAAG,wBACA,aAAK,SAAS,CAAC,SAAS,wBACpB,eAAQ,OAAO,CAAEwB,eAAgB,UAAC,gBAAc,EAAS,cACzD,eAAQ,OAAO,CAAEC,iBAAkB,UAAC,oBAAkB,EAAS,GAC7D,EACJ,EACJ,EACE,EACN,cAEN,KAAC,SAAS,wBACN,KAAC,GAAG,wBACA,MAAC,GAAG,YACCL,SAAS,eAAI,KAAC,KAAK,IAAG,CAEtBE,cAAc,eACX,oCACA,eAAQ,OAAO,CAAE,yBAAMC,kBAAiB,CAAC,KAAK,CAAC,EAAC,CAAC,SAAS,CAAC,OAAO,uBAAC,UAAG,SAAS,CAAC,sBAAsB,CAAC,KAAK,CAAE,CAAEG,QAAQ,CAAE,QAAS,CAAE,EAAK,EAAS,cACnJ,KAAC,WAAW,IAAE,GAEjB,GAEC,EACJ,EACE,GAGrB,CACP,CAAC,CAED,cAAenC,eAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}