{"ast":null,"code":"// import React,{useEffect, useRef,useState,useContext} from 'react' ;\n// import '../styles/tour-details.css'\n// import { Container,Row,Col,Form,ListGroup} from 'reactstrap';\n// import {useParams} from 'react-router-dom';\n// import calculateAvgRating from '../utils/avgRating';\n// import avatar from '../assets/images/avatar.jpg'\n// import Booking from '../components/Booking/Booking';\n// import useFetch from '../hooks/useFetch';\n// import { BASE_URL } from '../utils/config';\n// import {AuthContext} from './../context/AuthContext'\n\n// const TourDetails = () => {\n//     const {id} = useParams();\n//     const reviewMsgRef = useRef('');\n//     const [tourRating,setTourRating]=useState(null);\n//     const {user} = useContext(AuthContext)\n\n//     //fetch data from the database\n//     const {data:tour,loading,error} = useFetch(`${BASE_URL}/tours/${id}`)\n\n//     const {photo,title,desc,price,address,reviews,city,distance,maxGroupSize}=tour;\n\n//     const {totalRating,avgRating}=calculateAvgRating(reviews);\n\n//     const submitHandler= async e=>{\n//         e.preventDefault()\n//         const reviewText = reviewMsgRef.current.value;\n\n//         try {\n\n//             if(!user || user===undefined || user===null){\n//                 alert('Please sign in')\n//             }\n\n//             const reviewObj = {\n//                 username:user?.username,\n//                 reviewText,\n//                 rating:tourRating\n//             }\n\n//             const res = await fetch(`${BASE_URL}/review/${id}`,{\n//                 method:'post',\n//                 headers:{\n//                     'content-type':'application/json'\n//                 },\n//                 credentials:'include',\n//                 body:JSON.stringify(reviewObj)\n//             })\n//             console.log(res);\n\n//             const result = await res.json()\n//             if(!res.ok) {\n//                 return alert(result.message)\n//             }\n//             alert(result.message)\n//         } catch (err) {\n//             alert(err.message)\n//         }\n\n//     }\n\n//     useEffect(()=>{\n//         window.scrollTo(0,0)\n//     },[tour])\n\n//     const options={day:'numeric',month:'long',year:'numeric'};\n//     return <>\n//         <section>\n//             <Container>\n//                 {\n//                     loading && <h4 className='text-center pt-5'>Loading.........</h4>\n//                 }\n//                 {\n//                     error && <h4 className='text-center pt-5'>{error}</h4>\n//                 }\n//                 {\n//                     !loading && !error && <Row>\n//                     <Col lg='8'>\n//                         <div className='tour__content'>\n//                             <img src={photo} alt='' />\n//                             <div className='tour__info'>\n//                                 <h2>{title}</h2>\n//                                 <div className='d-flex align-items-center gap-5'>\n//                                 <span className='tour__rating d-flex align-items-center gap-1'>\n//                                         <i class='ri-star-s-fill ' style={{'color':\"var(--secondary-color)\"}}></i> \n//                                         {avgRating === 0 ? null : avgRating}\n//                                         {totalRating===0 ? 'Not Rated' : <span>({reviews?.length})</span>}          \n//                                 </span>\n//                                 <span><i class='ri-map-pin-user-fill'></i>{address}</span>\n//                                 </div>\n//                                 <div className=\"tour__extra-details\">\n//                                     <span><i class='ri-map-pin-2-line'></i>  {city} </span>\n//                                     <span><span className='icon'>â‚¹</span>{price}/per person</span>\n//                                     <span><i class='ri-map-pin-time-line'></i>  {distance} km</span>\n//                                     <span><i class='ri-group-line'></i>  {maxGroupSize} people</span>\n//                                 </div>\n//                                 <h5>Description</h5>\n//                                 <p>\n//                                     {desc}\n//                                 </p>\n//                             </div>\n//                             {/* Tour Reviews section start */}\n//                             <div className=\"tour__reviews mt-4\">\n//                                 <h4>Reviews ({reviews?.length}reviews)</h4>\n//                                 <Form onSubmit={submitHandler}>\n//                                     <div className='d-flex align-items-center gap-3 mb-4 rating__group'>\n//                                         <span onClick={()=> setTourRating(1)}>1<i class='ri-star-s-fill'></i></span>\n//                                         <span onClick={()=> setTourRating(2)}>2<i class='ri-star-s-fill'></i></span>\n//                                         <span onClick={()=> setTourRating(3)}>3<i class='ri-star-s-fill'></i></span>\n//                                         <span onClick={()=> setTourRating(4)}>4<i class='ri-star-s-fill'></i></span>\n//                                         <span onClick={()=> setTourRating(5)}>5<i class='ri-star-s-fill'></i></span>\n//                                     </div>\n//                                     <div className=\"review__input\">\n//                                         <input type=\"text\" ref={reviewMsgRef} placeholder='Share your thoughts' required/>\n//                                         <button className='btn primary__btn text-white' type='submit'>Submit</button>\n//                                     </div>\n//                                 </Form>\n//                                 <ListGroup className='user__reviews'>\n//                                     {\n//                                         reviews?.map(review=>(\n//                                             <div className='review__item'>\n//                                                 <img src={avatar} alt=''/>\n//                                                 <div className='w-100'>\n//                                                     <div className='d-flex align-items-center justify-content-between'>\n//                                                         <div>\n//                                                             <h5>{review.username}</h5>\n//                                                             <p>\n//                                                                 {new Date(review.createdAt).toLocaleDateString('en-US',options)}\n//                                                             </p>\n//                                                         </div>\n//                                                         <span className='d-flex align-items-center'>{review.rating}<i class='ri-star-s-fill'></i></span>\n//                                                     </div>\n//                                                     <h6>{review.reviewText}</h6>\n//                                                 </div>\n//                                             </div>\n\n//                                         ))\n//                                     }\n//                                 </ListGroup>\n//                             </div>\n//                             {/* Tour Reviews section end */}\n//                         </div>\n//                     </Col>\n//                     <Col lg='4'>\n//                         <Booking tour={tour} avgRating={avgRating}/>\n//                     </Col>\n//                 </Row>\n//                 }\n//             </Container>\n//         </section>\n//     </>\n// };\n\n// export default TourDetails;","map":{"version":3,"names":[],"sources":["E:/Final year Project/harmony-in-diversity/frontend/src/pages/TourDetails.jsx"],"sourcesContent":["// import React,{useEffect, useRef,useState,useContext} from 'react' ;\r\n// import '../styles/tour-details.css'\r\n// import { Container,Row,Col,Form,ListGroup} from 'reactstrap';\r\n// import {useParams} from 'react-router-dom';\r\n// import calculateAvgRating from '../utils/avgRating';\r\n// import avatar from '../assets/images/avatar.jpg'\r\n// import Booking from '../components/Booking/Booking';\r\n// import useFetch from '../hooks/useFetch';\r\n// import { BASE_URL } from '../utils/config';\r\n// import {AuthContext} from './../context/AuthContext'\r\n\r\n// const TourDetails = () => {\r\n//     const {id} = useParams();\r\n//     const reviewMsgRef = useRef('');\r\n//     const [tourRating,setTourRating]=useState(null);\r\n//     const {user} = useContext(AuthContext)\r\n\r\n//     //fetch data from the database\r\n//     const {data:tour,loading,error} = useFetch(`${BASE_URL}/tours/${id}`)\r\n\r\n//     const {photo,title,desc,price,address,reviews,city,distance,maxGroupSize}=tour;\r\n\r\n//     const {totalRating,avgRating}=calculateAvgRating(reviews);\r\n\r\n//     const submitHandler= async e=>{\r\n//         e.preventDefault()\r\n//         const reviewText = reviewMsgRef.current.value;\r\n\r\n        \r\n\r\n//         try {\r\n\r\n//             if(!user || user===undefined || user===null){\r\n//                 alert('Please sign in')\r\n//             }\r\n\r\n//             const reviewObj = {\r\n//                 username:user?.username,\r\n//                 reviewText,\r\n//                 rating:tourRating\r\n//             }\r\n\r\n//             const res = await fetch(`${BASE_URL}/review/${id}`,{\r\n//                 method:'post',\r\n//                 headers:{\r\n//                     'content-type':'application/json'\r\n//                 },\r\n//                 credentials:'include',\r\n//                 body:JSON.stringify(reviewObj)\r\n//             })\r\n//             console.log(res);\r\n\r\n//             const result = await res.json()\r\n//             if(!res.ok) {\r\n//                 return alert(result.message)\r\n//             }\r\n//             alert(result.message)\r\n//         } catch (err) {\r\n//             alert(err.message)\r\n//         }\r\n\r\n\r\n//     }\r\n\r\n//     useEffect(()=>{\r\n//         window.scrollTo(0,0)\r\n//     },[tour])\r\n\r\n//     const options={day:'numeric',month:'long',year:'numeric'};\r\n//     return <>\r\n//         <section>\r\n//             <Container>\r\n//                 {\r\n//                     loading && <h4 className='text-center pt-5'>Loading.........</h4>\r\n//                 }\r\n//                 {\r\n//                     error && <h4 className='text-center pt-5'>{error}</h4>\r\n//                 }\r\n//                 {\r\n//                     !loading && !error && <Row>\r\n//                     <Col lg='8'>\r\n//                         <div className='tour__content'>\r\n//                             <img src={photo} alt='' />\r\n//                             <div className='tour__info'>\r\n//                                 <h2>{title}</h2>\r\n//                                 <div className='d-flex align-items-center gap-5'>\r\n//                                 <span className='tour__rating d-flex align-items-center gap-1'>\r\n//                                         <i class='ri-star-s-fill ' style={{'color':\"var(--secondary-color)\"}}></i> \r\n//                                         {avgRating === 0 ? null : avgRating}\r\n//                                         {totalRating===0 ? 'Not Rated' : <span>({reviews?.length})</span>}          \r\n//                                 </span>\r\n//                                 <span><i class='ri-map-pin-user-fill'></i>{address}</span>\r\n//                                 </div>\r\n//                                 <div className=\"tour__extra-details\">\r\n//                                     <span><i class='ri-map-pin-2-line'></i>  {city} </span>\r\n//                                     <span><span className='icon'>â‚¹</span>{price}/per person</span>\r\n//                                     <span><i class='ri-map-pin-time-line'></i>  {distance} km</span>\r\n//                                     <span><i class='ri-group-line'></i>  {maxGroupSize} people</span>\r\n//                                 </div>\r\n//                                 <h5>Description</h5>\r\n//                                 <p>\r\n//                                     {desc}\r\n//                                 </p>\r\n//                             </div>\r\n//                             {/* Tour Reviews section start */}\r\n//                             <div className=\"tour__reviews mt-4\">\r\n//                                 <h4>Reviews ({reviews?.length}reviews)</h4>\r\n//                                 <Form onSubmit={submitHandler}>\r\n//                                     <div className='d-flex align-items-center gap-3 mb-4 rating__group'>\r\n//                                         <span onClick={()=> setTourRating(1)}>1<i class='ri-star-s-fill'></i></span>\r\n//                                         <span onClick={()=> setTourRating(2)}>2<i class='ri-star-s-fill'></i></span>\r\n//                                         <span onClick={()=> setTourRating(3)}>3<i class='ri-star-s-fill'></i></span>\r\n//                                         <span onClick={()=> setTourRating(4)}>4<i class='ri-star-s-fill'></i></span>\r\n//                                         <span onClick={()=> setTourRating(5)}>5<i class='ri-star-s-fill'></i></span>\r\n//                                     </div>\r\n//                                     <div className=\"review__input\">\r\n//                                         <input type=\"text\" ref={reviewMsgRef} placeholder='Share your thoughts' required/>\r\n//                                         <button className='btn primary__btn text-white' type='submit'>Submit</button>\r\n//                                     </div>\r\n//                                 </Form>\r\n//                                 <ListGroup className='user__reviews'>\r\n//                                     {\r\n//                                         reviews?.map(review=>(\r\n//                                             <div className='review__item'>\r\n//                                                 <img src={avatar} alt=''/>\r\n//                                                 <div className='w-100'>\r\n//                                                     <div className='d-flex align-items-center justify-content-between'>\r\n//                                                         <div>\r\n//                                                             <h5>{review.username}</h5>\r\n//                                                             <p>\r\n//                                                                 {new Date(review.createdAt).toLocaleDateString('en-US',options)}\r\n//                                                             </p>\r\n//                                                         </div>\r\n//                                                         <span className='d-flex align-items-center'>{review.rating}<i class='ri-star-s-fill'></i></span>\r\n//                                                     </div>\r\n//                                                     <h6>{review.reviewText}</h6>\r\n//                                                 </div>\r\n//                                             </div>\r\n                                            \r\n//                                         ))\r\n//                                     }\r\n//                                 </ListGroup>\r\n//                             </div>\r\n//                             {/* Tour Reviews section end */}\r\n//                         </div>\r\n//                     </Col>\r\n//                     <Col lg='4'>\r\n//                         <Booking tour={tour} avgRating={avgRating}/>\r\n//                     </Col>\r\n//                 </Row>\r\n//                 }\r\n//             </Container>\r\n//         </section>\r\n//     </>\r\n// };\r\n\r\n// export default TourDetails;\r\n\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAIA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}