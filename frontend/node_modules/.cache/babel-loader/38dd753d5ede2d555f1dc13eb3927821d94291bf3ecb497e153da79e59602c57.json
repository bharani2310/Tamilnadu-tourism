{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{BASE_URL}from'../utils/config';import'./form.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CreateForm(_ref){var onSubmit=_ref.onSubmit;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState({title:'',city:'',address:'',distance:'',price:'',maxGroupSize:'',desc:'',photo:null,featured:false}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];function convertToBase64(e){var file=e.target.files[0];var reader=new FileReader();reader.readAsDataURL(file);reader.onload=function(){var base64Result=reader.result;console.log(base64Result);setImage(base64Result);setFormData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{photo:base64Result});});};reader.onerror=function(error){console.log(\"Error: \",error);};}var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value,type=_e$target.type,checked=_e$target.checked;var val=type==='checkbox'?checked:value;setFormData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,val));});};var handleSubmit=function handleSubmit(e){e.preventDefault();console.log(\"Form :\",formData);createTour(formData);};function createTour(_x){return _createTour.apply(this,arguments);}function _createTour(){_createTour=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(BASE_URL,\"/tours\"),{method:'POST',credentials:'include',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;if(response.ok){_context.next=9;break;}return _context.abrupt(\"return\",alert(result.message));case 9:window.alert(\"Tour Created Successfully\");window.location.reload();console.log('Created tour:',result);return _context.abrupt(\"return\",result);case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);window.alert(\"Oops.Try Again\");console.error('Error creating tour:',_context.t0);throw _context.t0;case 20:case\"end\":return _context.stop();}},_callee,null,[[0,15]]);}));return _createTour.apply(this,arguments);}return/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-main-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"file-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"photo\",name:\"photo\",onChange:convertToBase64}),image===''||image===null?\"\":/*#__PURE__*/_jsx(\"img\",{width:100,height:100,src:image,alt:\"\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",name:\"title\",value:formData.title,required:true,onChange:handleChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"City\",name:\"city\",value:formData.city,required:true,onChange:handleChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Address\",name:\"address\",value:formData.address,required:true,onChange:handleChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Distance\",name:\"distance\",value:formData.distance,required:true,onChange:handleChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Price\",name:\"price\",value:formData.price,required:true,onChange:handleChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Max - People\",name:\"maxGroupSize\",value:formData.maxGroupSize,required:true,onChange:handleChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"textarea\",{name:\"desc\",placeholder:\"Description\",value:formData.desc,required:true,onChange:handleChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-container\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"featured\",children:\"Featured\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"featured\",name:\"featured\",checked:formData.featured,onChange:handleChange})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"search__btn\",type:\"submit\",children:\"Create\"})]})});}export default CreateForm;","map":{"version":3,"names":["React","useState","BASE_URL","CreateForm","onSubmit","image","setImage","title","city","address","distance","price","maxGroupSize","desc","photo","featured","formData","setFormData","convertToBase64","e","file","target","files","reader","FileReader","readAsDataURL","onload","base64Result","result","console","log","prevData","onerror","error","handleChange","name","value","type","checked","val","handleSubmit","preventDefault","createTour","data","fetch","method","credentials","headers","body","JSON","stringify","response","json","ok","alert","message","window","location","reload"],"sources":["C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/src/Form/CreateForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { BASE_URL } from '../utils/config';\r\nimport './form.css'\r\n\r\nfunction CreateForm({ onSubmit }) {\r\n    const [image,setImage]=useState('')\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    city: '',\r\n    address: '',\r\n    distance: '',\r\n    price: '',\r\n    maxGroupSize: '',\r\n    desc: '',\r\n    photo: null,\r\n    featured: false,\r\n  }); \r\n\r\n\r\n\r\n\r\n\r\n\r\n  function convertToBase64(e){\r\n    const file = e.target.files[0];\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => {\r\n        const base64Result = reader.result;\r\n        console.log(base64Result);\r\n        setImage(base64Result);\r\n        setFormData((prevData) => ({\r\n            ...prevData,\r\n            photo: base64Result,\r\n          }));\r\n    };\r\n    reader.onerror = error => {\r\n        console.log(\"Error: \", error);\r\n    };\r\n}\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    const val = type === 'checkbox' ? checked : value;\r\n    setFormData((prevData) => ({\r\n      ...prevData,\r\n      [name]: val,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"Form :\",formData)\r\n    createTour(formData);\r\n  };\r\n\r\n\r\n\r\n  async function createTour(data) {\r\n    try {\r\n      const response = await fetch(`${BASE_URL}/tours`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n      const result = await response.json();\r\n      if (!response.ok) {\r\n        return alert(result.message);\r\n      }\r\n      window.alert(\"Tour Created Successfully\")\r\n      window.location.reload();\r\n      console.log('Created tour:', result);\r\n      return result;\r\n    } catch (error) {\r\n        window.alert(\"Oops.Try Again\")\r\n      console.error('Error creating tour:', error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n\r\n\r\n\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div className='form-main-group'>\r\n      <div className=\"file-input-container\">\r\n        <input type=\"file\" id=\"photo\" name=\"photo\" onChange={convertToBase64} />\r\n        {image==='' || image===null ?\"\":<img width={100} height={100} src={image} alt=''/>}\r\n      </div>\r\n      <br/>\r\n      <div className=\"form-group\">\r\n          <input type=\"text\" placeholder='Title' name=\"title\" value={formData.title} required onChange={handleChange} />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input type=\"text\" placeholder='City' name=\"city\" value={formData.city} required onChange={handleChange} />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input type=\"text\" placeholder='Address' name=\"address\" value={formData.address} required onChange={handleChange} />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input type=\"number\" placeholder='Distance' name=\"distance\" value={formData.distance} required onChange={handleChange} />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input type=\"number\" placeholder='Price' name=\"price\" value={formData.price} required onChange={handleChange} />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input type=\"number\" placeholder='Max - People' name=\"maxGroupSize\" value={formData.maxGroupSize} required onChange={handleChange} />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <textarea  name=\"desc\" placeholder='Description' value={formData.desc} required onChange={handleChange} />\r\n        </div>\r\n        \r\n        <div className=\"form-group\">\r\n        <div className=\"checkbox-container\">\r\n            <label htmlFor=\"featured\">Featured</label>\r\n            <input type=\"checkbox\" id=\"featured\" name=\"featured\" checked={formData.featured} onChange={handleChange} />\r\n        </div>\r\n\r\n        </div>\r\n        <button className='search__btn' type=\"submit\">Create</button>\r\n        </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default CreateForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}