{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Container,Row,Col}from'reactstrap';import{BASE_URL}from'../utils/config';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UploadForm(_ref){var tourId=_ref.tourId;var genres=['Adventure','Art and Culture','Beaches','Crafts','Cuisine','Festivals','Forts','Hills','Lakes','Monuments','Museum','Palaces','Pilgrim Centers','Places of Interest','Waterfalls','Wellness','Wild Life','Heritage Sites'];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState({photo:null,title:'',genre:''}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];function convertToBase64(e){var file=e.target.files[0];var reader=new FileReader();reader.readAsDataURL(file);reader.onload=function(){var base64Result=reader.result;console.log(base64Result);setImage(base64Result);// Update image state\nsetFormData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{photo:base64Result});});};reader.onerror=function(error){console.log(\"Error: \",error);};}var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(\"Form :\",formData);UploadImage(formData);case 3:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();function UploadImage(_x2){return _UploadImage.apply(this,arguments);}function _UploadImage(){_UploadImage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var response,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(BASE_URL,\"/gallery\"),{method:'POST',credentials:'include',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:result=_context2.sent;if(response.ok){_context2.next=9;break;}return _context2.abrupt(\"return\",alert(result.message));case 9:window.alert(\"Image Uploaded Successfully\");window.location.reload();console.log('Uploaded Image:',result);return _context2.abrupt(\"return\",result);case 15:_context2.prev=15;_context2.t0=_context2[\"catch\"](0);window.alert(\"Oops. Try Again\");console.error('Error Uploading Image:',_context2.t0);throw _context2.t0;case 20:case\"end\":return _context2.stop();}},_callee2,null,[[0,15]]);}));return _UploadImage.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-main-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"file-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"photo\",name:\"photo\",onChange:convertToBase64}),image?/*#__PURE__*/_jsx(\"img\",{width:100,height:100,src:image,alt:\"\"}):null]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",name:\"title\",value:formData.title,required:true,onChange:handleChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"select\",{name:\"genre\",value:formData.genre,onChange:handleChange,className:\"form-control\",children:genres.map(function(genre,index){return/*#__PURE__*/_jsx(\"option\",{value:genre,children:genre},index);})})}),/*#__PURE__*/_jsx(\"button\",{className:\"search__btn\",onClick:handleSubmit,children:\"Submit\"})]})})})})})});}export default UploadForm;","map":{"version":3,"names":["React","useState","Container","Row","Col","BASE_URL","UploadForm","tourId","genres","image","setImage","photo","title","genre","formData","setFormData","convertToBase64","e","file","target","files","reader","FileReader","readAsDataURL","onload","base64Result","result","console","log","prevData","onerror","error","handleChange","name","value","handleSubmit","preventDefault","UploadImage","data","fetch","method","credentials","headers","body","JSON","stringify","response","json","ok","alert","message","window","location","reload","map","index"],"sources":["C:/Users/bhara/OneDrive/Documents/GitHub/TN/Tamilnadu-tourism/frontend/src/Form/CreateImage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Container, Row, Col } from 'reactstrap';\r\nimport { BASE_URL } from '../utils/config';\r\n\r\nfunction UploadForm({ tourId }) {\r\n  const genres = ['Adventure', 'Art and Culture', 'Beaches', 'Crafts', 'Cuisine', 'Festivals', 'Forts', 'Hills', 'Lakes', 'Monuments', 'Museum', 'Palaces', 'Pilgrim Centers', 'Places of Interest', 'Waterfalls', 'Wellness', 'Wild Life', 'Heritage Sites'];\r\n  const [image, setImage] = useState('');\r\n  const [formData, setFormData] = useState({\r\n    photo: null,\r\n    title: '',\r\n    genre: '',\r\n  });\r\n\r\n\r\n\r\n\r\n  function convertToBase64(e) {\r\n    const file = e.target.files[0];\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => {\r\n      const base64Result = reader.result;\r\n      console.log(base64Result);\r\n      setImage(base64Result); // Update image state\r\n      setFormData((prevData) => ({\r\n        ...prevData,\r\n        photo: base64Result,\r\n      }));\r\n    };\r\n    reader.onerror = error => {\r\n      console.log(\"Error: \", error);\r\n    };\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prevData) => ({\r\n      ...prevData,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    console.log(\"Form :\", formData);\r\n    UploadImage(formData);\r\n  };\r\n\r\n  async function UploadImage(data) {\r\n    try {\r\n      const response = await fetch(`${BASE_URL}/gallery`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n      const result = await response.json();\r\n      if (!response.ok) {\r\n        return alert(result.message);\r\n      }\r\n      window.alert(\"Image Uploaded Successfully\")\r\n      window.location.reload();\r\n      console.log('Uploaded Image:', result);\r\n      return result;\r\n    } catch (error) {\r\n      window.alert(\"Oops. Try Again\")\r\n      console.error('Error Uploading Image:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Container>\r\n        <Row>\r\n          <Col>\r\n            <form onSubmit={handleSubmit}>\r\n              <div className='form-main-group'>\r\n                <div className=\"file-input-container\">\r\n                  <input type=\"file\" id=\"photo\" name=\"photo\" onChange={convertToBase64} />\r\n                  {image ? <img width={100} height={100} src={image} alt='' /> : null}\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <input type=\"text\" placeholder='Title' name=\"title\" value={formData.title} required onChange={handleChange} />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <select name=\"genre\" value={formData.genre} onChange={handleChange} className=\"form-control\">\r\n                    {genres.map((genre, index) => (\r\n                      <option key={index} value={genre}>{genre}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <button className='search__btn' onClick={handleSubmit}>Submit</button>\r\n              </div>\r\n            </form>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default UploadForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}